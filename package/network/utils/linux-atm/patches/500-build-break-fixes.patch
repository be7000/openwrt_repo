From 90369dee76f908a49c842c7b2b31f936aebfc693 Mon Sep 17 00:00:00 2001
From: Miaoqing Pan <quic_miaoqing@quicinc.com>
Date: Tue, 29 Nov 2022 19:18:23 +0800
Subject: [PATCH] linux-atm: fix build break for linux 5.4

Signed-off-by: Miaoqing Pan <quic_miaoqing@quicinc.com>
---
 src/arpd/arp.c       | 1 +
 src/arpd/itf.c       | 1 +
 src/maint/atmdump.c  | 1 +
 src/maint/saaldump.c | 1 +
 4 files changed, 4 insertions(+)

diff --git a/src/arpd/arp.c b/src/arpd/arp.c
index 92d3787..ff1574c 100644
--- a/src/arpd/arp.c
+++ b/src/arpd/arp.c
@@ -17,6 +17,7 @@
 #include <netinet/in.h> /* for ntohs, etc. */
 #define _LINUX_NETDEVICE_H /* very crude hack for glibc2 */
 #include <linux/types.h>
+#include <net/if.h>
 #include <linux/if_arp.h>
 #include <linux/if_ether.h>
 #include <atm.h>
diff --git a/src/arpd/itf.c b/src/arpd/itf.c
index 92f0951..d285e3b 100644
--- a/src/arpd/itf.c
+++ b/src/arpd/itf.c
@@ -14,6 +14,7 @@
 #include <sys/socket.h>
 #define _LINUX_NETDEVICE_H /* glibc2 */
 #include <linux/types.h>
+#include <net/if.h>
 #include <linux/if_arp.h>
 
 #include "atmd.h"
diff --git a/src/maint/atmdump.c b/src/maint/atmdump.c
index 8b17826..f4a4beb 100644
--- a/src/maint/atmdump.c
+++ b/src/maint/atmdump.c
@@ -16,6 +16,7 @@
 #include <sys/socket.h>
 #include <netinet/in.h> /* for htonl and ntohl */
 #include <atm.h>
+#include <linux/sockios.h>
 
 
 static const char *pti[] = { "Data SDU 0","Data SDU 1","Data SDU 0, CE",
diff --git a/src/maint/saaldump.c b/src/maint/saaldump.c
index 83bdde9..ab9b274 100644
--- a/src/maint/saaldump.c
+++ b/src/maint/saaldump.c
@@ -16,6 +16,7 @@
 #include <sys/types.h>
 #include <sys/socket.h>
 #include <atm.h>
+#include <linux/sockios.h>
 
 #include "pdu.h"
 #define DUMP_MODE
-- 
2.7.4

