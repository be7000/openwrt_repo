From 1737f5a14528e32df1806471222176e507728fe0 Mon Sep 17 00:00:00 2001
From: John Crispin <john@phrozen.org>
Date: Fri, 3 May 2019 08:16:44 +0200
Subject: [PATCH] update nl80211.h

Sync with mac80211-next.git include/uapi/linux/nl80211.h

This brings in nl80211 definitions as of 2019-06-19.

Signed-off-by: John Crispin <john@phrozen.org>

diff --git a/src/ap/dfs.c b/src/ap/dfs.c
index f1dda68..0ff921c 100644
--- a/src/ap/dfs.c
+++ b/src/ap/dfs.c
@@ -1070,7 +1070,7 @@ static int hostapd_dfs_testmode_set_beacon_csa(struct hostapd_iface *iface)
 				      vht_oper_centr_freq_seg0_idx,
 				      vht_oper_centr_freq_seg1_idx,
 				      cmode->vht_capab,
-				      NULL);
+				      &cmode->he_capab[IEEE80211_MODE_AP]);
 
 	if (err) {
 		wpa_printf(MSG_ERROR, "DFS failed to calculate CSA freq params");
diff --git a/src/drivers/nl80211_copy.h b/src/drivers/nl80211_copy.h
index d214b73..e2b2623 100644
--- a/src/drivers/nl80211_copy.h
+++ b/src/drivers/nl80211_copy.h
@@ -4573,6 +4573,10 @@ enum nl80211_chan_width {
 	NL80211_CHAN_WIDTH_4,
 	NL80211_CHAN_WIDTH_8,
 	NL80211_CHAN_WIDTH_16,
+
+	/* keep last */
+	__NL80211_CHAN_WIDTH_NUM,
+	NL80211_CHAN_WIDTH_MAX = __NL80211_CHAN_WIDTH_NUM - 1,
 };
 
 /**
